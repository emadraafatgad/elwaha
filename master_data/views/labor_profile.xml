<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="labor_profile_action_tree" model="ir.actions.act_window">
        <field name="name">Registration</field>
        <field name="res_model">labor.profile</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form,kanban,search</field>
        <field name="domain">[]</field>
        <field name="context">{}</field>
    </record>
    <record model="ir.ui.view" id="labor_profile_view_id">
        <field name="name">Labor profile</field>
        <field name="model">labor.profile</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Labor">
                <header>
                     <button name="action_confirm" attrs="{'invisible':['|',('pre_medical_check', '=','Unfit'),('state', '!=','new')]}"
                                string="Confirm" type="object"
                                class="oe_highlight"/>
                     <button name="action_unlock" states="confirmed"
                                string="unlock" type="object"
                                class="oe_highlight" groups="master_data.group_registeration_manager"/>
                    <button name="action_lock" states="editing"
                                string="lock" type="object"
                                class="oe_highlight" groups="master_data.group_registeration_manager"/>

                    <field name="state" widget="statusbar"
                               statusbar_visible="new,confirmed"/>
                </header>
                <sheet>
                    <div class="pull-right" >
                        <field name="large_image" widget='image' class="oe_avatar" options='{"size": [128, 256]}'/>

                    </div>
                    <div>
                        <field name="image" widget='image' class="oe_avatar" options='{"preview_image": "image_medium", "size": [90, 90]}'/>
                        <div class="oe_title">
                            <h1>
                              <field name="name" required="1" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            </h1>
                            <h3>
                                <field name="identification_code"/>
                            </h3>


                        </div>

                    </div>


                    <group>
                        <group>
                            <field name="agent" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                             <field name="occupation" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="skills_ids" attrs="{'invisible':[('occupation', 'not in', ('pro_maid','pro_worker'))],'readonly':[('state', '=','confirmed')],'required':[('occupation', 'in', ('pro_maid','pro_worker'))]}"/>
                            <field name="salary" attrs="{'invisible':[('occupation', 'not in', ('pro_maid','pro_worker'))],'readonly':[('state', '=','confirmed')],'required':[('occupation', 'in', ('pro_maid','pro_worker'))]}"/>
                        </group>
                        <group >
                             <field name="pre_medical_check" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="reason" attrs="{'invisible':[('pre_medical_check', '!=', 'Unfit')],
                            'required':[('pre_medical_check', '=', 'Unfit')]}"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="General Information">
                    <group>
                            <group string="Basic Information">
                            <field name="gender" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="date_of_birth" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="age" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="marital_status" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="religion" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="phone" string="Personal Mob" required="1" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <field name="other_mob" attrs="{'readonly':[('state', '=','confirmed')]}" />

                            </group>
                            <group string="Document">

                            <field name="register_with" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            <button name="request_nira" invisible="1" attrs="{'invisible':['|','|',('pre_medical_check','=','Unfit'),('register_with','!=','nira'),('hide_request_nira','=',True)]}"
                                string="Nira Request" type="object" class="btn btn-warning"/>
                                <field name="id_available" invisible="1"/>
                                <field name="hide_request_nira" invisible="1"/>
                                <field name="national_id" attrs="{'readonly':['|',('register_with','in','nira'),('state','=','confirmed')],'required':[('register_with','in',('national_id','passport'))],'invisible':[('register_with','not in',('nira','national_id','passport'))]}"/>
                                <field name="start_date" attrs="{'readonly':['|',('register_with','in','nira'),('state','=','confirmed')],'required':[('register_with','in',('national_id'))],'invisible':[('register_with','not in',('nira','national_id'))]}"/>
<!--                                <label for="date_from" string="Dates"  attrs="{'invisible':[('register_with','not in',('nira','national_id'))]}"/>-->
<!--                                <div  attrs="{'invisible':[('register_with','not in',('nira','national_id'))]}">-->
                                <field name="card_no" class="oe_inline" attrs="{'readonly':['|',('register_with','in','nira'),('state','=','confirmed')],'invisible':[('register_with','not in',('nira','national_id')),('hide_request_nira','=',False)]}"/>
<!--                                </div>-->
                                <field name="allow_passport"  attrs="{'invisible':[('occupation','not in',('pro_maid','pro_worker'))]}"/>
                                <button name="passport_request" invisible="1" attrs="{'invisible':['|','|',('pre_medical_check','=','Unfit'),('register_with','!=','nira'),('hide_request_passport','=',True)]}"
                                string="Request Passport" type="object"
                                class="btn btn-warning"/>

                                <field name="passport_available" invisible="1"/>
                                <field name="hide_request_passport" invisible="1"/>
                                <field name="passport_no" attrs="{'required':[('register_with','=','passport')],'invisible':[('register_with','=',False)],'readonly':['|',('state','=','confirmed'),('register_with','!=','passport')]}"/>
                                <field name="pass_start_date" attrs="{'required':[('register_with','=','passport')],'invisible':[('register_with','=',False)],'readonly':['|',('state','=','confirmed'),('register_with','!=','passport')]}"/>
                                <field name="pass_end_date" attrs="{'required':[('register_with','=','passport')],'invisible':[('register_with','=',False)],'readonly':['|',('state','=','confirmed'),('register_with','!=','passport')]}"/>
                                <field name="pass_from" attrs="{'required':[('register_with','=','passport')],'invisible':[('register_with','=',False)],'readonly':['|',('state','=','confirmed'),('register_with','!=','passport')]}"/>
                                <field name="prn" invisible="1"/>
                                <button name="request_interpol" invisible="1"
                                string="Request Interpol" type="object"
                                class="btn btn-warning"
                                attrs="{'invisible':['|',('hide_request_interpol','=',True),('pre_medical_check','=','Unfit')]}" />
                                <field name="interpol_no" attrs="{'invisible':[('hide_request_interpol','!=',True)],'readonly':[('state','=','confirmed')]}"/>
                                <field name="interpol_start_date" attrs="{'invisible':[('hide_request_interpol','!=',True)],'readonly':[('state','=','confirmed')]}"/>
                                <field name="interpol_end_date" attrs="{'invisible':[('hide_request_interpol','!=',True)],'readonly':[('state','=','confirmed')]}"/>
                                <field name="hide_request_interpol" invisible="1"/>
                                <field name="hide_request_medical" invisible="1"/>
                                 <button name="big_medical_request" invisible="1"
                                  string="Gcc" type="object"
                                  class="btn btn-warning"
                                  attrs="{'invisible':['|',('pre_medical_check','=','Unfit'),('hide_request_medical','=',True)]}" />
                                 <field name="after_medical_check" invisible="1"/>
                                 <field name="agency" invisible="1"/>
                                 <field name="agency_code" invisible="1"/>
                                 <field name="specify_agency" invisible="1"/>
                                 <field name="medical_unfit_reason" attrs="{'invisible':[('after_medical_check','!=','unfit')]}"/>
                                 <button name="request_training"  invisible="1" string="Request Training" type="object"
                                         class="btn btn-warning"
                                         attrs="{'invisible':['|','|',('pre_medical_check','=','Unfit'),('hide_request_training','=',True),('occupation','!=','house_maid')]}"
                                         />
                                 <field name="hide_request_training" invisible="1"/>
                            </group>
                        <group>
                            <group string="Address" colspan="6">
                                <field name="lc1" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="lc2" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="lc3" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="lc4" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="district" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            </group>
                            <group string="Specifications" colspan="6">
                                <field name="height" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="weight" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="children" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="specifications" widget="many2many_tags" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="language" widget="many2many_tags" attrs="{'readonly':[('state', '=','confirmed')]}" options="{'no_create_edit':True}" domain="['|',('active','=',False),('active','=',True)]"/>
                                <field name="education_certificate" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                                <field name="end_education" attrs="{'invisible':[('education_certificate','=','no_education')],'readonly':[('state', '=','confirmed')]}"/>
                                <field name="no_education" attrs="{'invisible':[('education_certificate','!=','no_education')],'readonly':[('state', '=','confirmed')]}"/>
                                <field name="general_remarks" attrs="{'readonly':[('state', '=','confirmed')]}"/>
                            </group>
                        </group>
                        <group>
                           <group string="Details of origin" colspan="6">

                                <field name="origin_lc1" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>
                                <field name="origin_lc2" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>
                                <field name="origin_lc3" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>
                                <field name="origin_lc4" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>
                                <field name="origin_district" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>
                                <field name="origin_tribe" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>
                                <field name="origin_clan" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>
                                <field name="origin_descendants" attrs="{'readonly':[('state', '=','confirmed')],'required':[('register_with', '!=','passport')]}"/>

                           </group>
                            <group string="Experience" colspan="6">
                            <div>
                             <field name="experience_ids" attrs="{'readonly':[('state', '=','confirmed')]}">
                                 <tree editable="Top">
                                     <field name="country_id"/>
                                     <field name="from_year"/>
                                     <field name="to_year"/>
                                 </tree>
                             </field>
                            </div>
                                <field name="experience_ids_len" invisible="1"/>
                                </group>
                        </group>

                        <group colspan="12" string="Particulars Of Own Family">
                            <div>
                            <field name="relative_ids" string="Particulars Of Own Family" attrs="{'readonly':[('state', '=','confirmed')]}">
                                <tree editable="Top">
                                    <field name="relatives_degree"/>
                                    <field name="name"/>
                                    <field name="phone"/>
                                    <field name="date_of_birth"/>
                                    <field name="national_id"/>
                                    <field name="lc1"/>
                                    <field name="lc2"/>
                                    <field name="lc3"/>
                                    <field name="lc4"/>
                                    <field name="district"/>
                                    <field name="tribe" options="{'no_create_edit':True}"/>
                                    <field name="nationality" />
                                    <field name="note"/>
                                </tree>
                            </field>
                        </div>
                        </group>
                        <group>

                                <field name="interview_by"  options="{'no_create_edit':True}" attrs="{'readonly':[('state', '=','confirmed')]}"/>

                        </group>
                    </group>
                   </page>
                       <page invisible="1" name="children" string="Children">
                           <field name="children_ids">
                                <tree editable="Top">
                                    <field name="number"/>
                                    <field name="age"/>
                                    <field name="age_month"/>
                                </tree>
                            </field>
                       </page>
                   </notebook>
                </sheet>
                 <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>


    <record model="ir.ui.view" id="labor_profile_kanban_view">
        <field name="name">Labor Profile</field>
        <field name="model">labor.profile</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="id"/>
                <field name="name"/>
                <field name="gender"/>
                <field name="age"/>
                <field name="phone"/>
                <field name="state_id"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_hr_kanban_record">
                            <div class="o_kanban_image_fill_left d-none d-md-block"
                                 t-attf-style="background-image: url(#{kanban_image('labor.profile', 'image_medium', record.id.raw_value)})"
                                 role="img"/>

                            <div class="oe_kanban_details">
                                <div class="o_kanban_record_top">
                                    <div class="o_kanban_record_headings">
                                        <strong class="o_kanban_record_title">
                                            <field name="name"/>
                                        </strong>
                                    </div>
                                </div>
                                <div t-if="record.age.value">
                                    <t t-esc="record.age.value"/>
                                </div>
                                <div t-if="record.gender.value">
                                    <t t-esc="record.gender.value"/>
                                </div>
                                <div t-if="record.state_id.raw_value">
                                    <t t-esc="record.state_id.raw_value"/>
                                </div>
                                <div t-if="record.phone.value">
                                    <t t-esc="record.phone.value"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>

        </field>
    </record>

    <record model="ir.ui.view" id="labor_profile_tree">
        <field name="name">Labor List</field>
        <field name="model">labor.profile</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string='Labor Information'>
                <field name="identification_code"/>
                <field name="name"/>
                <field name="national_id"/>
                <field name="agent"/>
                <field name="religion"/>
                <field name="age"/>
                <field name="pre_medical_check"/>
                <field name="state"/>
            </tree>
        </field>
    </record>


    <record id="view_profile_labor_filter" model="ir.ui.view">
        <field name="name">labor.profile.select</field>
        <field name="model">labor.profile</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
                <separator orientation="vertical"/>
                <field name="name" select="1"/>
                <field name="national_id" string="national ID" select="1"/>
                <field name="passport_no" string="national ID"/>
                <field name="identification_code" string="code" select="1"/>
                <field name="phone"/>
                <field name="agent"/>
                <field name="registration_date"/>
                <newline/>
            <filter string="Has Experience"

                    domain="[('experience_ids_len','>',0)]"
                        />
                <group expand="0" string="Group By...">
                <filter string="Agent" icon="terp-personal"
                        domain="[]"
                        context="{'group_by':'agent'}"/>
                <filter string="Religion" icon="terp-personal"
                        domain="[]"
                        context="{'group_by':'religion'}"/>
                 <filter string="Fit/Unfit" icon="terp-personal"
                        domain="[]"
                        context="{'group_by':'pre_medical_check'}"/>
                <filter string="Document" icon="terp-personal"
                        domain="[]"
                        context="{'group_by':'register_with'}"/>

         </group>

        </field>
    </record>

    <menuitem id="labor_profile"
              name="Registration"
              parent="menu_recruitment_root"
              sequence="10"
              action="labor_profile_action_tree"
              groups="master_data.group_registeration_user"
    />

</odoo>